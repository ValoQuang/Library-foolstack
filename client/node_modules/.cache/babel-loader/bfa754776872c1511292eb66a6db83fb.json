{"ast":null,"code":"import * as ActionTypes from '../actions/ActionTypes';\n// The auth reducer. The starting state sets authentication\n// based on a token being in local storage. In a real app,\n// we would also want a util to check if the token is expired.\nvar getLocalCred = localStorage.getItem('creds');\nvar getLocalUserInfo = localStorage.getItem('creds');\nvar getLocalToken = localStorage.getItem('token');\n\nconst Auth = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    isLoading: false,\n    isAuthenticated: getLocalToken ? true : false,\n    token: getLocalToken,\n    user: getLocalCred ? JSON.parse(getLocalCred) : null,\n    userinfo: localStorage.getItem('userinfo') ? JSON.parse(getLocalUserInfo) : null,\n    errMess: null\n  };\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.LOGIN_REQUEST:\n      return { ...state,\n        isLoading: true,\n        isAuthenticated: false,\n        user: action.creds\n      };\n\n    case ActionTypes.LOGIN_SUCCESS:\n      return { ...state,\n        isLoading: false,\n        isAuthenticated: true,\n        errMess: '',\n        token: action.token,\n        userinfo: action.userinfo\n      };\n\n    case ActionTypes.LOGIN_FAILURE:\n      return { ...state,\n        isLoading: false,\n        isAuthenticated: false,\n        errMess: action.message\n      };\n\n    case ActionTypes.LOGOUT_REQUEST:\n      return { ...state,\n        isLoading: true,\n        isAuthenticated: true\n      };\n\n    case ActionTypes.LOGOUT_SUCCESS:\n      return { ...state,\n        isLoading: false,\n        isAuthenticated: false,\n        token: '',\n        user: null,\n        userinfo: null\n      };\n\n    case ActionTypes.EDIT_USER:\n      return { ...state,\n        userinfo: action.payload\n      };\n\n    case ActionTypes.EDIT_PASSWORD:\n      return { ...state,\n        user: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default Auth;","map":{"version":3,"sources":["C:/Users/Quang/Documents/GitHub/Library-management-/client/src/redux/reducers/auth.tsx"],"names":["ActionTypes","getLocalCred","localStorage","getItem","getLocalUserInfo","getLocalToken","Auth","state","isLoading","isAuthenticated","token","user","JSON","parse","userinfo","errMess","action","type","LOGIN_REQUEST","creds","LOGIN_SUCCESS","LOGIN_FAILURE","message","LOGOUT_REQUEST","LOGOUT_SUCCESS","EDIT_USER","payload","EDIT_PASSWORD"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,wBAA7B;AAEA;AACA;AACA;AAEA,IAAIC,YAAgB,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAvB;AACA,IAAIC,gBAAoB,GAAGF,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B;AACA,IAAIE,aAAiB,GAAGH,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAxB;;AAWA,MAAMG,IAAI,GAAG,YAOO;AAAA,MAPNC,KAOM,uEAPE;AACdC,IAAAA,SAAS,EAAE,KADG;AAEdC,IAAAA,eAAe,EAAEJ,aAAa,GAAG,IAAH,GAAU,KAF1B;AAGdK,IAAAA,KAAK,EAAEL,aAHO;AAIdM,IAAAA,IAAI,EAAEV,YAAY,GAAGW,IAAI,CAACC,KAAL,CAAWZ,YAAX,CAAH,GAA8B,IAJlC;AAKda,IAAAA,QAAQ,EAAEZ,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAmCS,IAAI,CAACC,KAAL,CAAWT,gBAAX,CAAnC,GAAkE,IAL9D;AAMdW,IAAAA,OAAO,EAAE;AANK,GAOF;AAAA,MAAbC,MAAa;;AAChB,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKjB,WAAW,CAACkB,aAAjB;AACI,aAAO,EAAC,GAAGX,KAAJ;AACHC,QAAAA,SAAS,EAAE,IADR;AAEHC,QAAAA,eAAe,EAAE,KAFd;AAGHE,QAAAA,IAAI,EAAEK,MAAM,CAACG;AAHV,OAAP;;AAKJ,SAAKnB,WAAW,CAACoB,aAAjB;AACI,aAAO,EAAC,GAAGb,KAAJ;AACHC,QAAAA,SAAS,EAAE,KADR;AAEHC,QAAAA,eAAe,EAAE,IAFd;AAGHM,QAAAA,OAAO,EAAE,EAHN;AAIHL,QAAAA,KAAK,EAAEM,MAAM,CAACN,KAJX;AAKHI,QAAAA,QAAQ,EAAEE,MAAM,CAACF;AALd,OAAP;;AAOJ,SAAKd,WAAW,CAACqB,aAAjB;AACI,aAAO,EAAC,GAAGd,KAAJ;AACHC,QAAAA,SAAS,EAAE,KADR;AAEHC,QAAAA,eAAe,EAAE,KAFd;AAGHM,QAAAA,OAAO,EAAEC,MAAM,CAACM;AAHb,OAAP;;AAKJ,SAAKtB,WAAW,CAACuB,cAAjB;AACI,aAAO,EAAC,GAAGhB,KAAJ;AACHC,QAAAA,SAAS,EAAE,IADR;AAEHC,QAAAA,eAAe,EAAE;AAFd,OAAP;;AAKJ,SAAKT,WAAW,CAACwB,cAAjB;AACI,aAAO,EAAC,GAAGjB,KAAJ;AACHC,QAAAA,SAAS,EAAE,KADR;AAEHC,QAAAA,eAAe,EAAE,KAFd;AAGHC,QAAAA,KAAK,EAAE,EAHJ;AAIHC,QAAAA,IAAI,EAAE,IAJH;AAKHG,QAAAA,QAAQ,EAAE;AALP,OAAP;;AAQJ,SAAKd,WAAW,CAACyB,SAAjB;AACI,aAAO,EAAC,GAAGlB,KAAJ;AACHO,QAAAA,QAAQ,EAAEE,MAAM,CAACU;AADd,OAAP;;AAGJ,SAAK1B,WAAW,CAAC2B,aAAjB;AACI,aAAO,EACH,GAAGpB,KADA;AAEHI,QAAAA,IAAI,EAAEK,MAAM,CAACU;AAFV,OAAP;;AAIJ;AACI,aAAOnB,KAAP;AA9CR;AAgDH,CAxDD;;AA0DA,eAAeD,IAAf","sourcesContent":["import * as ActionTypes from '../actions/ActionTypes';\r\nimport {PayloadAction} from '@reduxjs/toolkit'\r\n// The auth reducer. The starting state sets authentication\r\n// based on a token being in local storage. In a real app,\r\n// we would also want a util to check if the token is expired.\r\n\r\nvar getLocalCred:any = localStorage.getItem('creds');\r\nvar getLocalUserInfo:any = localStorage.getItem('creds');\r\nvar getLocalToken:any = localStorage.getItem('token')\r\n\r\nexport interface A {\r\n    type:String,\r\n    creds: any,\r\n    token:any,\r\n    userinfo:any,\r\n    message:any,\r\n    payload:any\r\n}\r\n\r\nconst Auth = (state = {\r\n        isLoading: false,\r\n        isAuthenticated: getLocalToken ? true : false,\r\n        token: getLocalToken,\r\n        user: getLocalCred ? JSON.parse(getLocalCred) : null,\r\n        userinfo: localStorage.getItem('userinfo') ? JSON.parse(getLocalUserInfo) : null,\r\n        errMess: null\r\n    }, action:A) => {\r\n    switch (action.type) {\r\n        case ActionTypes.LOGIN_REQUEST:\r\n            return {...state,\r\n                isLoading: true,\r\n                isAuthenticated: false,\r\n                user: action.creds\r\n            };\r\n        case ActionTypes.LOGIN_SUCCESS:\r\n            return {...state,\r\n                isLoading: false,\r\n                isAuthenticated: true,\r\n                errMess: '',\r\n                token: action.token,\r\n                userinfo: action.userinfo\r\n            };\r\n        case ActionTypes.LOGIN_FAILURE:\r\n            return {...state,\r\n                isLoading: false,\r\n                isAuthenticated: false,\r\n                errMess: action.message\r\n            };\r\n        case ActionTypes.LOGOUT_REQUEST:\r\n            return {...state,\r\n                isLoading: true,\r\n                isAuthenticated: true\r\n            };\r\n            \r\n        case ActionTypes.LOGOUT_SUCCESS:\r\n            return {...state,\r\n                isLoading: false,\r\n                isAuthenticated: false,\r\n                token: '',\r\n                user: null,\r\n                userinfo: null\r\n            };\r\n\r\n        case ActionTypes.EDIT_USER:\r\n            return {...state,\r\n                userinfo: action.payload};\r\n\r\n        case ActionTypes.EDIT_PASSWORD:\r\n            return {\r\n                ...state,\r\n                user: action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default Auth;"]},"metadata":{},"sourceType":"module"}